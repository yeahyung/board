<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ML Auto</title>
</head>
<script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js">
</script>
<script>
    $(function(){
        $("#upload").click(function (event){
            event.preventDefault();
            var formData = new FormData();
            var fileInput = document.getElementById("files");
            var files = fileInput.files;
            for(var i=0;i<files.length;i++){
                formData.append('file-'+i, files[i]);
            }
            $.ajax({
                type:"POST",
                enctype:'multipart/form-data',
                url:'/upload',
                data:formData,
                processData:false,
                contentType:false,
                cache:false,
                timeout:600000,
                success:function(data){
                    console.log(data);
                },
                error:function(e){
                    console.log("error",e);
                }
            });
        });

        $("#aug").click(function (event){
            event.preventDefault();
            var formData = new FormData();
            var fileInput = document.getElementById("files");
            var files = fileInput.files;
            for(var i=0;i<files.length;i++){
                formData.append('file-'+i, files[i]);
            }
            $.ajax({
                type:"POST",
                enctype:'multipart/form-data',
                url:'/imgAug',
                data:formData,
                processData:false,
                contentType:false,
                cache:false,
                timeout:600000,
                success:function(data){
                    console.log(data);
                },
                error:function(e){
                    console.log("error",e);
                }
            });
        });

        $("#train").click(function (event){
            event.preventDefault();
            var formData = new FormData();
            var fileInput = document.getElementById("files");
            var files = fileInput.files;
            for(var i=0;i<files.length;i++){
                formData.append('file-'+i, files[i]);
            }
            $.ajax({
                type:"POST",
                enctype:'multipart/form-data',
                url:'/train',
                data:formData,
                processData:false,
                contentType:false,
                cache:false,
                timeout:600000,
                success:function(data){
                    console.log(data);
                },
                error:function(e){
                    console.log("error",e);
                }
            });
        });

    });
</script>
<body>
    <div>
        <form method="post" name="image" enctype="multipart/form-data">
            <input type="file" id="files" name="files" multiple>
            <button type="submit" id="upload">서버에 업로드</button>
            <button type="submit" id="aug">Aug 요청</button>
            <input type="button" id="download" onclick="location.href='http://localhost:8080/download'" value="Aug 다운로드">
            <button type="submit" id="train">Train 요청</button>
            <button type="submit" id="trainDownload">Train 다운로드</button>
        </form>
    </div>
</body>
</html>